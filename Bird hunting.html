<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Name Hunter: Sky Raffle</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- MediaPipe Hands & Camera -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@400;700;900&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
            background: linear-gradient(to bottom, #38bdf8, #bae6fd); /* Sky Gradient */
        }

        .comic-font {
            font-family: 'Bangers', cursive;
            letter-spacing: 2px;
        }

        /* Mirrored Video (for natural feel) */
        .mirror {
            transform: scaleX(-1);
        }

        /* Cloud Animation */
        .cloud {
            position: absolute;
            opacity: 0.8;
            animation: drift linear infinite;
            pointer-events: none;
            z-index: 1;
        }
        
        @keyframes drift {
            from { transform: translateX(-200px); }
            to { transform: translateX(100vw); }
        }

        /* Laser Beam Animation */
        .laser-beam {
            position: absolute;
            height: 8px;
            background: #ef4444;
            box-shadow: 0 0 10px #f87171, 0 0 20px #ef4444;
            transform-origin: 0 50%;
            z-index: 50;
            opacity: 0;
            transition: opacity 0.1s;
            pointer-events: none;
            border-radius: 4px;
        }
        
        .laser-flash {
            animation: laserFlash 0.3s ease-out forwards;
        }

        @keyframes laserFlash {
            0% { opacity: 1; width: 0%; }
            50% { width: 150%; opacity: 1; }
            100% { width: 200%; opacity: 0; }
        }

        /* Modal Animations */
        @keyframes popIn {
            0% { transform: scale(0) rotate(-10deg); opacity: 0; }
            80% { transform: scale(1.1) rotate(5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        .animate-pop-in { animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        
        .text-shadow { text-shadow: 3px 3px 0px rgba(0,0,0,0.3); }
    </style>
</head>
<body class="h-screen w-full relative">

    <!-- Background Clouds -->
    <div id="clouds-container" class="absolute inset-0 overflow-hidden">
        <!-- Clouds injected by JS -->
    </div>

    <!-- 1. SETUP SCREEN -->
    <div id="setup-screen" class="absolute inset-0 z-50 flex flex-col items-center justify-center p-4 bg-slate-900/95 backdrop-blur-sm transition-opacity duration-300">
        <h1 class="text-6xl text-cyan-400 comic-font mb-2 tracking-widest text-shadow">NAME HUNTER</h1>
        <p class="text-slate-400 mb-6">Enter names below. They will become birds in the sky!</p>
        
        <div class="w-full max-w-md bg-slate-800 p-6 rounded-2xl shadow-2xl border border-slate-700">
            <label class="block text-sm font-bold text-cyan-300 mb-2">PARTICIPANTS (One per line)</label>
            <textarea id="name-input" class="w-full h-48 bg-slate-900 text-white p-4 rounded-xl border border-slate-600 focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 outline-none resize-none font-mono" placeholder="Abby&#10;Bill&#10;Cindy">Abby
Bill
Cindy
Dave
Emily
Frank
Grace
Henry</textarea>
            
            <div class="mt-6 flex gap-4">
                <button onclick="startGame()" class="flex-1 bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-300 hover:to-orange-400 text-black font-black text-xl py-4 rounded-xl transition-all transform hover:scale-105 shadow-[0_0_20px_rgba(251,191,36,0.5)]">
                    LAUNCH GAME üöÄ
                </button>
            </div>
        </div>
        
        <div class="mt-8 flex items-center gap-6 text-slate-400 text-sm">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üëÜ</span> <span>Make "Gun" Hand</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-2xl">üé§</span> <span>Say "BOOM" to Fire</span>
            </div>
        </div>
    </div>

    <!-- 2. GAME UI -->
    <div id="game-ui" class="hidden absolute inset-0 overflow-hidden">
        
        <!-- Main Game Canvas (Sky & Birds) - NOT MIRRORED so text is readable -->
        <canvas id="game_canvas" class="absolute inset-0 w-full h-full z-10"></canvas>
        
        <!-- Laser Element -->
        <div id="laser" class="laser-beam"></div>

        <!-- Camera Feed (Bottom Right Corner) -->
        <div class="absolute bottom-4 right-4 w-48 h-36 md:w-64 md:h-48 bg-black rounded-2xl overflow-hidden border-4 border-white shadow-2xl z-40 transform transition-transform hover:scale-110 origin-bottom-right">
            <!-- Video is MIRRORED for natural interaction -->
            <video id="input_video" class="w-full h-full object-cover mirror"></video>
            <div class="absolute bottom-0 left-0 w-full bg-black/60 text-white text-[10px] text-center py-1 font-mono">
                PILOT CAM
            </div>
        </div>

        <!-- HUD: Top Bar -->
        <div class="absolute top-0 left-0 w-full p-4 flex justify-between items-start pointer-events-none z-30">
            
            <!-- Left Side: Controls & Stats -->
            <div class="flex gap-4 pointer-events-auto">
                <!-- Stop Button -->
                <button onclick="stopGame()" class="bg-red-500/80 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg backdrop-blur-md transition-all border border-red-400 flex items-center gap-2">
                    <span>üõë</span> STOP
                </button>

                <!-- Stats -->
                <div class="bg-white/30 backdrop-blur-md p-3 rounded-xl border border-white/40 text-slate-900 shadow-sm min-w-[120px]">
                    <div class="text-xs uppercase font-bold text-slate-700">Birds Alive</div>
                    <div class="text-3xl font-black font-mono text-white text-shadow-sm" id="bird-count">0</div>
                </div>
            </div>

            <!-- Right Side: Status Indicators -->
            <div class="flex flex-col gap-2 items-end">
                <!-- Gun Status -->
                <div id="status-gun" class="bg-white/30 backdrop-blur-md px-4 py-2 rounded-xl border border-red-500/30 flex items-center gap-3 transition-colors shadow-sm">
                    <span class="text-2xl">üî´</span>
                    <div>
                        <div class="text-xs text-slate-700 uppercase font-bold">Weapon</div>
                        <div class="font-bold text-red-600" id="gun-text">NO SIGNAL</div>
                    </div>
                </div>

                <!-- Mic Status -->
                <div class="bg-white/30 backdrop-blur-md px-4 py-2 rounded-xl border border-white/40 flex items-center gap-3 w-48 shadow-sm">
                    <span class="text-2xl">üé§</span>
                    <div class="w-full">
                        <div class="text-xs text-slate-700 uppercase font-bold flex justify-between">
                            <span>Voice Detect</span>
                            <span id="vol-level">..</span>
                        </div>
                        <div class="w-full h-2 bg-slate-200 rounded-full mt-1 overflow-hidden">
                            <div id="vol-bar" class="h-full bg-green-500 w-0 transition-all duration-75"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Winner Modal -->
        <div id="winner-modal" class="hidden absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-md">
            <div class="text-center animate-pop-in bg-white p-12 rounded-3xl shadow-2xl border-4 border-yellow-400 max-w-2xl mx-4 relative overflow-hidden">
                
                <!-- Background rays -->
                <div class="absolute inset-0 bg-yellow-50 z-0 opacity-50"></div>

                <div class="relative z-10">
                    <h2 class="text-5xl text-orange-500 comic-font mb-4 text-shadow-sm">TARGET HIT!</h2>
                    <div class="text-8xl mb-6 bounce">ü¶úüí•</div>
                    <div class="text-6xl md:text-7xl font-black text-slate-800 mb-8 tracking-tight" id="winner-name">NAME</div>
                    <button onclick="closeModal()" class="px-10 py-4 bg-cyan-500 hover:bg-cyan-400 text-white font-black text-2xl rounded-full shadow-lg transform transition-all hover:scale-105 active:scale-95">
                        NEXT HUNT
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. CONFIGURATION ---
        const DEBOUNCE_TIME = 2000; 
        
        // --- 2. STATE ---
        const state = {
            birds: [],
            isGameActive: false,
            lastShotTime: 0,
            hand: null, // {x, y}
            currentAim: null, // {x, y}
            isGunDetected: false,
            audioContext: null,
            analyser: null,
            dataArray: null,
            recognition: null,
            cameraInitialized: false
        };

        // --- 3. DOM ELEMENTS ---
        const els = {
            setup: document.getElementById('setup-screen'),
            game: document.getElementById('game-ui'),
            input: document.getElementById('name-input'),
            video: document.getElementById('input_video'),
            canvas: document.getElementById('game_canvas'),
            ctx: document.getElementById('game_canvas').getContext('2d'),
            birdCount: document.getElementById('bird-count'),
            gunStatus: document.getElementById('status-gun'),
            gunText: document.getElementById('gun-text'),
            volBar: document.getElementById('vol-bar'),
            volLevel: document.getElementById('vol-level'),
            winnerModal: document.getElementById('winner-modal'),
            winnerName: document.getElementById('winner-name'),
            laser: document.getElementById('laser'),
            clouds: document.getElementById('clouds-container')
        };

        // --- 4. CLOUDS & SKY ---
        function initClouds() {
            // Clear existing clouds first (for restarts)
            els.clouds.innerHTML = '';
            
            const cloudEmojis = ['‚òÅÔ∏è', 'üå•Ô∏è', '‚òÅÔ∏è'];
            for(let i=0; i<8; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                cloud.innerText = cloudEmojis[Math.floor(Math.random() * cloudEmojis.length)];
                cloud.style.fontSize = (Math.random() * 60 + 40) + 'px';
                cloud.style.top = (Math.random() * 80) + '%';
                cloud.style.left = -200 + 'px';
                cloud.style.animationDuration = (Math.random() * 20 + 15) + 's';
                cloud.style.animationDelay = (Math.random() * -20) + 's'; 
                els.clouds.appendChild(cloud);
            }
        }

        // --- 5. BIRD CLASS ---
        class Bird {
            constructor(name, canvasWidth, canvasHeight) {
                this.name = name;
                this.x = Math.random() * (canvasWidth - 100) + 50;
                this.y = Math.random() * (canvasHeight - 150) + 50;
                this.vx = (Math.random() - 0.5) * 5;
                this.vy = (Math.random() - 0.5) * 3;
                this.size = 40;
                this.hue = Math.floor(Math.random() * 360);
                this.wobble = Math.random() * Math.PI * 2;
            }

            update(w, h) {
                this.x += this.vx;
                this.y += this.vy;
                this.wobble += 0.1;
                if (this.x < 30 || this.x > w - 30) this.vx *= -1;
                if (this.y < 30 || this.y > h - 30) this.vy *= -1;
                this.x = Math.max(30, Math.min(w-30, this.x));
                this.y = Math.max(30, Math.min(h-30, this.y));
            }

            draw(ctx) {
                ctx.save();
                ctx.translate(this.x, this.y + Math.sin(this.wobble) * 10);
                ctx.save(); 
                if(this.vx > 0) ctx.scale(-1, 1); 
                ctx.font = "50px Arial";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText("ü¶ú", 0, 0);
                ctx.restore(); 

                ctx.fillStyle = "white";
                ctx.font = "900 20px Roboto";
                ctx.strokeStyle = "black";
                ctx.lineWidth = 3;
                ctx.strokeText(this.name, 0, -40);
                ctx.fillText(this.name, 0, -40);
                ctx.restore();
            }
        }

        // --- 6. GAME CONTROL FLOW ---
        async function startGame() {
            const raw = els.input.value.trim();
            if (!raw) return alert("Please enter at least one name!");
            
            const names = raw.split('\n').map(n => n.trim()).filter(n => n);
            if (names.length === 0) return alert("Please enter valid names!");

            // Initialize Systems
            if (!state.audioContext) try { initAudio(); } catch (e) { console.error(e); }
            if (!state.cameraInitialized) await initCamera();
            initSpeech(); // Start/Restart speech

            initClouds();

            els.canvas.width = window.innerWidth;
            els.canvas.height = window.innerHeight;
            state.birds = names.map(n => new Bird(n, els.canvas.width, els.canvas.height));
            
            // Switch UI
            els.setup.classList.add('hidden');
            els.game.classList.remove('hidden');
            
            state.isGameActive = true;
            updateBirdCount();
            gameLoop();
        }

        function stopGame() {
            state.isGameActive = false;
            
            // Switch UI
            els.game.classList.add('hidden');
            els.setup.classList.remove('hidden');

            // Reset States
            state.birds = [];
            state.hand = null;
            state.isGunDetected = false;
            
            // Stop Speech to save resources (and prevent firing in menu)
            if (state.recognition) {
                try { state.recognition.stop(); } catch(e){}
            }
            
            // Clear Canvas
            els.ctx.clearRect(0, 0, els.canvas.width, els.canvas.height);
        }

        function updateBirdCount() {
            els.birdCount.innerText = state.birds.length;
        }

        // --- 7. AUDIO & SPEECH SYSTEM ---
        function initAudio() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            state.audioContext = new AudioContext();
            
            navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
                const source = state.audioContext.createMediaStreamSource(stream);
                state.analyser = state.audioContext.createAnalyser();
                state.analyser.fftSize = 256;
                source.connect(state.analyser);
                state.dataArray = new Uint8Array(state.analyser.frequencyBinCount);
            }).catch(err => console.error("Mic error:", err));
        }

        function initSpeech() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) return;

            if (!state.recognition) {
                state.recognition = new SpeechRecognition();
                state.recognition.continuous = true;
                state.recognition.lang = 'en-US';
                state.recognition.interimResults = true;

                state.recognition.onresult = (event) => {
                    if (!state.isGameActive) return; // Ignore if game stopped
                    for (let i = event.resultIndex; i < event.results.length; ++i) {
                        let transcript = event.results[i][0].transcript.trim().toLowerCase();
                        if (transcript.includes('boom') || transcript.includes('bang')) {
                            triggerShotIfReady();
                        }
                    }
                };

                state.recognition.onend = () => {
                    // Only restart if game is still active
                    if (state.isGameActive) {
                        try { state.recognition.start(); } catch(e){}
                    }
                };
            }

            try { state.recognition.start(); } catch(e){}
        }

        function triggerShotIfReady() {
            const now = Date.now();
            if (state.isGunDetected && state.currentAim && now - state.lastShotTime > DEBOUNCE_TIME && state.birds.length > 0) {
                els.volBar.style.width = '100%';
                els.volBar.className = "h-full bg-red-500 w-full transition-all duration-75";
                fireShot(state.currentAim.x, state.currentAim.y);
                setTimeout(() => { getVolume(); }, 200);
            }
        }

        function getVolume() {
            if (!state.analyser) return 0;
            state.analyser.getByteFrequencyData(state.dataArray);
            let sum = 0;
            for(let i = 0; i < state.dataArray.length; i++) sum += state.dataArray[i];
            let average = sum / state.dataArray.length;
            
            if (Date.now() - state.lastShotTime > 500) {
                const percentage = Math.min(100, Math.round((average / 50) * 100));
                els.volBar.style.width = `${percentage}%`;
                els.volLevel.innerText = "Active";
                els.volBar.className = "h-full bg-green-500 w-0 transition-all duration-75";
            }
            return average;
        }

        // --- 8. HAND TRACKING ---
        const hands = new Hands({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`});
        hands.setOptions({ maxNumHands: 1, modelComplexity: 1, minDetectionConfidence: 0.6, minTrackingConfidence: 0.5 });
        hands.onResults(onHandResults);

        async function initCamera() {
            state.cameraInitialized = true;
            const camera = new Camera(els.video, {
                onFrame: async () => { await hands.send({image: els.video}); },
                width: 1280, height: 720
            });
            await camera.start();
        }

        function onHandResults(results) {
            if (!state.isGameActive) return; // Optimization: Don't process if stopped
            
            if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                detectGunGesture(results.multiHandLandmarks[0]);
            } else {
                state.isGunDetected = false;
                state.hand = null;
                updateGunUI(false);
            }
        }

        function detectGunGesture(lm) {
            const wrist = lm[0];
            
            // Tips
            const thumbTip = lm[4];
            const indexTip = lm[8];
            const middleTip = lm[12];
            const ringTip = lm[16];
            const pinkyTip = lm[20];

            // Knuckles (MCP) for reference
            const indexMCP = lm[5];
            const middleMCP = lm[9]; // Palm center reference

            const d = (p1, p2) => Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));

            // Reference for Hand Size
            const handSize = d(wrist, middleMCP);

            // --- STRICT "PISTOL" LOGIC ---

            // 1. Index Finger: EXTENDED
            // The tip must be far from the wrist, significantly more than the knuckle.
            const dIndexTip = d(wrist, indexTip);
            const isIndexExtended = dIndexTip > d(wrist, indexMCP) * 1.2;

            // 2. Middle, Ring, Pinky: CURLED
            // These tips must be significantly closer to the wrist than the Index Tip.
            // This ensures they are tucked in (loose fist).
            const dMiddleTip = d(wrist, middleTip);
            const dRingTip = d(wrist, ringTip);
            const dPinkyTip = d(wrist, pinkyTip);

            const areOthersCurled = 
                dMiddleTip < dIndexTip * 0.8 && 
                dRingTip < dIndexTip * 0.8 && 
                dPinkyTip < dIndexTip * 0.8;

            // 3. Thumb: RAISED (The Hammer)
            // The thumb tip should be far away from the Index Knuckle (creating the 'L' shape gap).
            // If the thumb is tucked (fist), this distance is small.
            const dThumbToIndexMCP = d(thumbTip, indexMCP);
            const isThumbRaised = dThumbToIndexMCP > handSize * 0.5;

            // COMBINE ALL
            if (isIndexExtended && areOthersCurled && isThumbRaised) {
                state.isGunDetected = true;
                state.hand = { x: indexTip.x, y: indexTip.y }; 
                updateGunUI(true);
            } else {
                state.isGunDetected = false;
                state.hand = null;
                updateGunUI(false);
            }
        }

        function updateGunUI(isGun) {
            if (isGun) {
                els.gunStatus.className = "bg-green-500 text-white px-4 py-2 rounded-xl border border-green-600 flex items-center gap-3 shadow-lg transform scale-105 transition-all";
                els.gunText.innerText = "LOCKED";
                els.gunText.className = "font-black text-white";
            } else {
                els.gunStatus.className = "bg-white/30 backdrop-blur-md px-4 py-2 rounded-xl border border-red-500/30 flex items-center gap-3 transition-colors shadow-sm";
                els.gunText.innerText = "NO SIGNAL";
                els.gunText.className = "font-bold text-red-600";
            }
        }

        // --- 9. GAME LOOP ---
        function gameLoop() {
            if (!state.isGameActive) return; // Completely stops loop

            const ctx = els.ctx;
            const w = els.canvas.width;
            const h = els.canvas.height;

            ctx.clearRect(0, 0, w, h);

            // Draw Birds
            state.birds.forEach(bird => {
                bird.update(w, h);
                bird.draw(ctx);
            });

            // Draw Crosshair
            if (state.isGunDetected && state.hand) {
                const aimX = (1 - state.hand.x) * w; 
                const aimY = state.hand.y * h;
                
                state.currentAim = { x: aimX, y: aimY };

                ctx.shadowBlur = 0;
                ctx.strokeStyle = "#ef4444";
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.arc(aimX, aimY, 25, 0, Math.PI * 2);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(aimX - 40, aimY);
                ctx.lineTo(aimX + 40, aimY);
                ctx.moveTo(aimX, aimY - 40);
                ctx.lineTo(aimX, aimY + 40);
                ctx.stroke();
            } else {
                state.currentAim = null;
            }

            getVolume(); // Update visual bar
            requestAnimationFrame(gameLoop);
        }

        // --- 10. SHOOTING LOGIC ---
        function fireShot(originX, originY) {
            state.lastShotTime = Date.now();
            
            const targetIndex = Math.floor(Math.random() * state.birds.length);
            const victim = state.birds[targetIndex];
            
            const dx = victim.x - originX;
            const dy = victim.y - originY;
            const dist = Math.sqrt(dx*dx + dy*dy);
            const angle = Math.atan2(dy, dx) * (180 / Math.PI);

            els.laser.style.left = originX + 'px';
            els.laser.style.top = originY + 'px';
            els.laser.style.width = dist + 'px';
            els.laser.style.transform = `rotate(${angle}deg)`;
            
            els.laser.classList.remove('laser-flash');
            void els.laser.offsetWidth;
            els.laser.classList.add('laser-flash');

            playBangSound();

            setTimeout(() => {
                handleHit(targetIndex);
            }, 100);
        }

        function handleHit(index) {
            const bird = state.birds[index];
            state.birds.splice(index, 1);
            updateBirdCount();

            confetti({
                particleCount: 150,
                spread: 100,
                origin: { x: bird.x / window.innerWidth, y: bird.y / window.innerHeight }
            });

            els.winnerName.innerText = bird.name;
            els.winnerModal.classList.remove('hidden');
            playWinSound();
        }

        function closeModal() {
            els.winnerModal.classList.add('hidden');
        }

        // --- 11. SOUND FX ---
        function playBangSound() {
            if (!state.audioContext) return;
            const osc = state.audioContext.createOscillator();
            const gain = state.audioContext.createGain();
            osc.connect(gain);
            gain.connect(state.audioContext.destination);
            
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, state.audioContext.currentTime);
            osc.frequency.exponentialRampToValueAtTime(0.01, state.audioContext.currentTime + 0.4);
            gain.gain.setValueAtTime(0.4, state.audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, state.audioContext.currentTime + 0.4);
            osc.start();
            osc.stop(state.audioContext.currentTime + 0.5);
        }

        function playWinSound() {
            if (!state.audioContext) return;
            const now = state.audioContext.currentTime;
            const notes = [523.25, 659.25, 783.99, 1046.50];
            notes.forEach((freq, i) => {
                const osc = state.audioContext.createOscillator();
                const gain = state.audioContext.createGain();
                osc.connect(gain);
                gain.connect(state.audioContext.destination);
                osc.type = 'square';
                osc.frequency.value = freq;
                gain.gain.setValueAtTime(0.1, now + i*0.1);
                gain.gain.linearRampToValueAtTime(0, now + i*0.1 + 0.3);
                osc.start(now + i*0.1);
                osc.stop(now + i*0.1 + 0.3);
            });
        }
        
        window.addEventListener('resize', () => {
            els.canvas.width = window.innerWidth;
            els.canvas.height = window.innerHeight;
        });

    </script>
    <style>
        .text-shadow-sm { text-shadow: 2px 2px 0 rgba(0,0,0,0.1); }
        .bounce { animation: bounce 1s infinite; }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-20px);} }
    </style>
</body>
</html>
